# ==============================================================================
# CONFIGURAZIONE DOCKER - Google File Search RAG System
# ==============================================================================
# Copia questo file in .env e configura i tuoi valori
# IMPORTANTE: Non committare il file .env in Git (contiene secrets)
# ==============================================================================

# ------------------------------------------------------------------------------
# GEMINI API CONFIGURATION (OBBLIGATORIO)
# ------------------------------------------------------------------------------

# Chiave API di Google Gemini
# Ottienila da: https://makersuite.google.com/app/apikey
GEMINI_API_KEY=your_api_key_here

# Nome del File Search Store di Google
# Formato: fileSearchStores/[store-id]
# Puoi crearne uno nuovo con: python backend/create_store.py
FILE_SEARCH_STORE_NAME=fileSearchStores/your-store-name

# ------------------------------------------------------------------------------
# GEMINI MODEL CONFIGURATION
# ------------------------------------------------------------------------------

# Modello Gemini predefinito per le risposte
# Opzioni disponibili:
#   - gemini-2.5-pro (più accurato, più lento)
#   - gemini-2.5-flash (più veloce, meno costoso)
#   - gemini-1.5-pro-latest
#   - gemini-1.5-flash-latest
DEFAULT_MODEL=gemini-2.5-pro

# ------------------------------------------------------------------------------
# DOCUMENT CHUNKING CONFIGURATION
# ------------------------------------------------------------------------------

# Dimensione massima di un chunk in token
# Range: 100-2048 token
# Default: 800
# Nota: chunk più piccoli = ricerca più precisa ma più frammenti
CHUNK_SIZE=800

# Percentuale di sovrapposizione tra chunks consecutivi
# Range: 0-50%
# Default: 10
# Nota: overlap maggiore = più contesto condiviso ma più ridondanza
CHUNK_OVERLAP_PERCENT=10

# ------------------------------------------------------------------------------
# RAG (Retrieval-Augmented Generation) CONFIGURATION
# ------------------------------------------------------------------------------

# Numero di chunks da recuperare dalla ricerca semantica
# Range: 1-100
# Default: 25
# Nota: più chunks = più contesto ma più tempo/costo
RESULTS_COUNT=25

# Score minimo di rilevanza per filtrare i chunks
# Range: 0.0-1.0
# Default: 0.3
# Nota: threshold più alto = solo chunks molto rilevanti
MIN_RELEVANCE_SCORE=0.3

# Numero massimo di chunks da usare per generare la risposta
# Range: 1-50
# Default: 15
# Nota: più chunks = risposta più completa ma token limit più alto
MAX_CHUNKS_FOR_GENERATION=15

# ------------------------------------------------------------------------------
# FLASK SERVER CONFIGURATION (per produzione)
# ------------------------------------------------------------------------------

# Ambiente Flask
# Opzioni: production, development
# Default: production
FLASK_ENV=production

# Numero di worker Gunicorn
# Default: 4
# Nota: aumenta per gestire più richieste concorrenti
# Regola empirica: (2 x num_cores) + 1
GUNICORN_WORKERS=4

# Timeout richieste Gunicorn (in secondi)
# Default: 120
# Nota: aumenta per operazioni lunghe (upload file grandi, query complesse)
GUNICORN_TIMEOUT=120

# ------------------------------------------------------------------------------
# DOCKER PORTS CONFIGURATION (opzionale)
# ------------------------------------------------------------------------------

# Porta esposta dal backend
# Default: 5000
# BACKEND_PORT=5000

# Porta esposta dal frontend
# Default: 80
# FRONTEND_PORT=80

# ------------------------------------------------------------------------------
# ADVANCED CONFIGURATION (opzionale)
# ------------------------------------------------------------------------------

# Abilita output non bufferizzato per logs Python
# Default: 1 (abilitato)
PYTHONUNBUFFERED=1

# Directory per uploads temporanei (all'interno del container)
# Default: /app/uploads
# UPLOAD_FOLDER=/app/uploads

# Dimensione massima file upload (in MB)
# Default: 100
# MAX_FILE_SIZE=100

# Cache TTL per query (in secondi)
# Default: 300 (5 minuti)
# CACHE_TTL=300

# ------------------------------------------------------------------------------
# CIRCUIT BREAKER CONFIGURATION (opzionale)
# ------------------------------------------------------------------------------

# Numero di fallimenti prima di aprire il circuito
# Default: 5
# CIRCUIT_BREAKER_FAILURE_THRESHOLD=5

# Timeout prima di tentare recovery (in secondi)
# Default: 60
# CIRCUIT_BREAKER_TIMEOUT=60

# ------------------------------------------------------------------------------
# LOGGING CONFIGURATION (opzionale)
# ------------------------------------------------------------------------------

# Livello di logging
# Opzioni: DEBUG, INFO, WARNING, ERROR, CRITICAL
# Default: INFO
# LOG_LEVEL=INFO

# Directory per i log files (host machine)
# Default: ./logs
# LOG_DIR=./logs

# ==============================================================================
# ESEMPIO CONFIGURAZIONE COMPLETA
# ==============================================================================
# Di seguito un esempio di configurazione completa e ottimizzata:
#
# # API Keys
# GEMINI_API_KEY=AIzaSyD...your_actual_key
# FILE_SEARCH_STORE_NAME=fileSearchStores/abc123xyz
#
# # Model
# DEFAULT_MODEL=gemini-2.5-flash
#
# # Chunking (ottimizzato per documenti tecnici)
# CHUNK_SIZE=1024
# CHUNK_OVERLAP_PERCENT=15
#
# # RAG (ottimizzato per precisione)
# RESULTS_COUNT=30
# MIN_RELEVANCE_SCORE=0.4
# MAX_CHUNKS_FOR_GENERATION=20
#
# # Server (per server con 4 CPU)
# GUNICORN_WORKERS=8
# GUNICORN_TIMEOUT=180
#
# ==============================================================================
